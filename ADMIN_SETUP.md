# üîê –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–ü—Ä–∏ –∫–æ–∂–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —á–µ—Ä–µ–∑ `entrypoint.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
1. –ó–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –º—ñ–≥—Ä–∞—Ü—ñ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
2. –°—Ç–≤–æ—Ä—é—é—Ç—å—Å—è —Ä–æ–ª—ñ —Ç–∞ –ø—Ä–∞–≤–∞ (RolesAndPermissionsSeeder)
3. **–°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –≥–æ–ª–æ–≤–Ω–∏–π –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä** (AdminSeeder) - —è–∫—â–æ –π–æ–≥–æ –Ω–µ–º–∞—î

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ .env

### –û–±–æ–≤'—è–∑–∫–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ

–î–æ–¥–∞–π—Ç–µ –≤ `.env` —Ñ–∞–π–ª:

```env
# Admin credentials
ADMIN_EMAIL=it_commission_college@uzhnu.edu.ua
ADMIN_PASSWORD=–≤–∞—à_–Ω–∞–¥—ñ–π–Ω–∏–π_–ø–∞—Ä–æ–ª—å
ADMIN_FIRST_NAME=IT
ADMIN_LAST_NAME=–ö–æ–º—ñ—Å—ñ—è
ADMIN_MIDDLE_NAME=
```

### ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û!

1. **ADMIN_PASSWORD** - –æ–±–æ–≤'—è–∑–∫–æ–≤–∞ –∑–º—ñ–Ω–Ω–∞!
   - –Ø–∫—â–æ –Ω–µ –≤–∫–∞–∑–∞–Ω–æ - seeder –≤–∏–¥–∞—Å—Ç—å –ø–æ–º–∏–ª–∫—É
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –Ω–∞–¥—ñ–π–Ω–∏–π –ø–∞—Ä–æ–ª—å (–º—ñ–Ω—ñ–º—É–º 12 —Å–∏–º–≤–æ–ª—ñ–≤)
   
2. **–î–ª—è production:**
   ```bash
   # –ó–≥–µ–Ω–µ—Ä—É–π—Ç–µ –Ω–∞–¥—ñ–π–Ω–∏–π –ø–∞—Ä–æ–ª—å
   openssl rand -base64 24
   ```

3. **–ë–µ–∑–ø–µ–∫–∞:**
   - –ù—ñ–∫–æ–ª–∏ –Ω–µ –∫–æ–º—ñ—Ç—å—Ç–µ .env –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ –ø–∞—Ä–æ–ª—è–º–∏
   - –ó–º—ñ–Ω—ñ—Ç—å –ø–∞—Ä–æ–ª—å –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ –≤—Ö–æ–¥—É
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ä—ñ–∑–Ω—ñ –ø–∞—Ä–æ–ª—ñ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â

## –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

### 1. –ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –¥–µ–ø–ª–æ—ó

```bash
docker-compose up -d
```

–í –ª–æ–≥–∞—Ö –ø–æ–±–∞—á–∏—Ç–µ:
```
Waiting for database to be ready...
Database is ready.
Running database migrations...
Checking roles and permissions...
‚úÖ Roles and permissions seeded
Ensuring admin user exists...
‚úÖ –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä —Å—Ç–≤–æ—Ä–µ–Ω–∏–π —É—Å–ø—ñ—à–Ω–æ!
üìß Email: it_commission_college@uzhnu.edu.ua
‚ö†Ô∏è  –í–ê–ñ–õ–ò–í–û: –ó–º—ñ–Ω—ñ—Ç—å –ø–∞—Ä–æ–ª—å –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ –≤—Ö–æ–¥—É!
```

### 2. –ü—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –∑–∞–ø—É—Å–∫–∞—Ö

–Ø–∫—â–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –≤–∂–µ —ñ—Å–Ω—É—î:
```
‚ÑπÔ∏è  –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –∑ email it_commission_college@uzhnu.edu.ua –≤–∂–µ —ñ—Å–Ω—É—î.
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ AdminSeeder

```php
<?php

namespace Database\Seeders;

class AdminSeeder extends Seeder
{
    public function run(): void
    {
        $adminEmail = env('ADMIN_EMAIL', 'it_commission_college@uzhnu.edu.ua');
        $adminPassword = env('ADMIN_PASSWORD');
        
        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ –≤–∫–∞–∑–∞–Ω–æ –ø–∞—Ä–æ–ª—å
        if (empty($adminPassword)) {
            throw new \Exception('Admin password is not set in .env file');
        }
        
        // –Ü–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è - —Å—Ç–≤–æ—Ä—é—î —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –Ω–µ —ñ—Å–Ω—É—î
        $existingAdmin = User::query()->where('email', $adminEmail)->first();
        
        if ($existingAdmin) {
            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–ª—ñ
            if (!$existingAdmin->hasRole('admin')) {
                $existingAdmin->assignRole('admin');
            }
            return;
        }
        
        // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
        $admin = User::query()->create([...]);
        $admin->assignRole('admin');
    }
}
```

## –†—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Ä—É—á–Ω—É:

```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ
docker-compose exec app php artisan db:seed --class=Database\\Seeders\\AdminSeeder

# –ê–±–æ –∑ —Ö–æ—Å—Ç—É
docker-compose exec app php artisan db:seed --class=AdminSeeder
```

## –ó–º—ñ–Ω–∞ –ø–∞—Ä–æ–ª—è –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è

### –ß–µ—Ä–µ–∑ tinker
```bash
docker-compose exec app php artisan tinker
```

```php
$admin = User::where('email', 'it_commission_college@uzhnu.edu.ua')->first();
$admin->password = Hash::make('–Ω–æ–≤–∏–π_–Ω–∞–¥—ñ–π–Ω–∏–π_–ø–∞—Ä–æ–ª—å');
$admin->save();
```

### –ß–µ—Ä–µ–∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
1. –£–≤—ñ–π–¥—ñ—Ç—å —è–∫ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ –ü—Ä–æ—Ñ—ñ–ª—å
3. –ó–º—ñ–Ω—ñ—Ç—å –ø–∞—Ä–æ–ª—å —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É

## Troubleshooting

### –ü–æ–º–∏–ª–∫–∞: "Admin password is not set"

```bash
‚ùå –ü–û–ú–ò–õ–ö–ê: –ù–µ –≤–∫–∞–∑–∞–Ω–æ ADMIN_PASSWORD –≤ .env —Ñ–∞–π–ª—ñ!
```

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# –î–æ–¥–∞–π—Ç–µ –≤ .env
ADMIN_PASSWORD=–≤–∞—à_–Ω–∞–¥—ñ–π–Ω–∏–π_–ø–∞—Ä–æ–ª—å

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
docker-compose restart app
```

### –ü–æ–º–∏–ª–∫–∞: Role "admin" not found

```bash
‚ùå –†–æ–ª—å "admin" –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞! –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–ø–æ—á–∞—Ç–∫—É RolesAndPermissionsSeeder
```

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
docker-compose exec app php artisan db:seed --class=RolesAndPermissionsSeeder
docker-compose exec app php artisan db:seed --class=AdminSeeder
```

### –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä —Å—Ç–≤–æ—Ä–µ–Ω–∏–π, –∞–ª–µ –Ω–µ –º–æ–∂–µ —É–≤—ñ–π—Ç–∏

**–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:**
1. Email –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
2. –ü–∞—Ä–æ–ª—å –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Ç–æ–º—É, —â–æ –≤ .env –ø—ñ–¥ —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
3. Email –≤–µ—Ä–∏—Ñ—ñ–∫–æ–≤–∞–Ω–æ (–º–∞—î –±—É—Ç–∏ `email_verified_at`)

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤ –±–∞–∑—ñ
docker-compose exec app php artisan tinker
>>> User::where('email', 'it_commission_college@uzhnu.edu.ua')->first();
```

## –ú–Ω–æ–∂–∏–Ω–Ω—ñ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏

–î–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤:

### –ß–µ—Ä–µ–∑ tinker
```bash
docker-compose exec app php artisan tinker
```

```php
$admin = User::create([
    'email' => 'another.admin@uzhnu.edu.ua',
    'email_verified_at' => now(),
    'password' => Hash::make('–ø–∞—Ä–æ–ª—å'),
    'first_name' => '–Ü–º\'—è',
    'last_name' => '–ü—Ä—ñ–∑–≤–∏—â–µ',
]);
$admin->assignRole('admin');
```

### –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É
–°—Ç–≤–æ—Ä—ñ—Ç—å –≤–ª–∞—Å–Ω—É artisan –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ–≤.

## –ë–µ–∑–ø–µ–∫–∞ –≤ production

### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

1. **–ù–∞–¥—ñ–π–Ω—ñ –ø–∞—Ä–æ–ª—ñ:**
   ```bash
   # –ú—ñ–Ω—ñ–º—É–º 16 —Å–∏–º–≤–æ–ª—ñ–≤, –∑–º—ñ—à–∞–Ω—ñ —Ç–∏–ø–∏
   openssl rand -base64 24
   ```

2. **–†—ñ–∑–Ω—ñ –ø–∞—Ä–æ–ª—ñ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â:**
   - `.env.development` - —Ç–µ—Å—Ç–æ–≤–∏–π –ø–∞—Ä–æ–ª—å
   - `.env.production` - —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –Ω–∞–¥—ñ–π–Ω–∏–π –ø–∞—Ä–æ–ª—å

3. **–ó–º—ñ–Ω–∞ –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ –≤—Ö–æ–¥—É:**
   - –ó–∞–≤–∂–¥–∏ –∑–º—ñ–Ω—é–π—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω–∏–π –ø–∞—Ä–æ–ª—å
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ 2FA —è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω–æ

4. **–û–±–º–µ–∂–µ–Ω–Ω—è —Å–ø—Ä–æ–± –≤—Ö–æ–¥—É:**
   - Laravel Fortify –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±–º–µ–∂—É—î
   - –ú–æ–Ω—ñ—Ç–æ—Ä—Ç–µ failed login attempts

5. **–ê—É–¥–∏—Ç –∞–¥–º—ñ–Ω—Å—å–∫–∏—Ö –¥—ñ–π:**
   - –õ–æ–≥—É–π—Ç–µ –≤—Å—ñ –≤–∞–∂–ª–∏–≤—ñ –¥—ñ—ó
   - –†–µ–≥—É–ª—è—Ä–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –ª–æ–≥–∏

### ‚ùå –ù—ñ–∫–æ–ª–∏ –Ω–µ —Ä–æ–±—ñ—Ç—å

- ‚ùå –ù–µ –∫–æ–º—ñ—Ç—å—Ç–µ .env –∑ –ø–∞—Ä–æ–ª—è–º–∏ –≤ git
- ‚ùå –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Å–ª–∞–±–∫—ñ –ø–∞—Ä–æ–ª—ñ
- ‚ùå –ù–µ –¥—ñ–ª–∏—Ç–µ—Å—å –∞–¥–º—ñ–Ω—Å—å–∫–∏–º–∏ credentials
- ‚ùå –ù–µ –∑–∞–ª–∏—à–∞–π—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ñ –ø–∞—Ä–æ–ª—ñ –≤ production

## –î–æ–¥–∞—Ç–∫–æ–≤—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ—Ö –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤
docker-compose exec app php artisan tinker
>>> User::role('admin')->get(['id', 'email', 'first_name', 'last_name']);

# –í–∏–¥–∞–ª–∏—Ç–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
>>> User::where('email', 'email@example.com')->delete();

# –ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ —Ä–æ–ª—å admin —ñ—Å–Ω—É—é—á–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
>>> $user = User::find(1);
>>> $user->assignRole('admin');
```

---

**Maintainer:** it_commission_college@uzhnu.edu.ua
